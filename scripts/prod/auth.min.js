$("#logInForm").submit(function(c){c.preventDefault();$("#logInButton").html('<i class="fa fa-spinner fa-spin"></i>');var b=$.trim($("#logInEmail").val());var a=$.trim($("#logInPassword").val());firebase.auth().signInWithEmailAndPassword(b,a).then(function(d){$("#logInEmail").val("");$("#logInPassword").val("");$("#logInButton").html("Log In")},function(e){$("#logInButton").html("Log In");var f=e.code;var d=e.message;console.log(f+" "+d)})});$(".log-out-button").click(function(){var a=firebase.auth().currentUser.email;firebase.auth().signOut().then(function(){$(".mobile-menu").fadeOut();console.log(a+"logged out")},function(b){console.log("Error! "+errorMessage)})});var currentUser;var userProfile;firebase.auth().onAuthStateChanged(function(a){if(a){$(".user-logged-out").hide();$(".user-logged-in").fadeIn();currentUser=a.uid;var b=firebase.database().ref("users/"+currentUser);b.on("value",function(c){userProfile=c.val();$("#historyList").empty();$(".user-email").html(userProfile.name);$("#totalAudioTime").html(formatMilliseconds(userProfile.totalAudioTime));$("#totalSessions").html(userProfile.totalSessions);$("#streak").html(userProfile.streak);$("#frequentActivity").html(checkFrequency(userProfile.stats.activity));$("#startingMood").html(checkFrequency(userProfile.stats.startingMood));$("#endingMood").html(checkFrequency(userProfile.stats.endingMood));$.each(userProfile.history,function(e,g){var d=g.date;var f=new Date(d).toDateString();$("#historyList").append("<li><p><em>"+f+"</em></p> "+g.preMood+" <i class='fa fa-plus icon-left icon-right'></i> "+g.activity+" <i class='fa fa-arrow-right icon-left icon-right'></i> "+g.postMood+"</li>")})})}else{$(".user-logged-in").hide();$(".user-logged-out").fadeIn();currentUser="Nobody!";$(".user-email").html("")}});function checkFrequency(d){n=undefined;Object.keys(d).forEach(function(a){if(!n){n=d[a]}else{if(n<d[a]){n=d[a]}}});j=Object.keys(d).filter(function(a){return d[a]==n});if(j.length>1){var b="";for(var c=0;c<j.length;c++){b+=j[c];if(c===j.length-1){break}else{b+=", "}}}else{var b=j}return b};